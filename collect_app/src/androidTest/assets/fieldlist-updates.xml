<?xml version="1.0"?>
<h:html xmlns="http://www.w3.org/2002/xforms" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:h="http://www.w3.org/1999/xhtml" xmlns:jr="http://openrosa.org/javarosa" xmlns:odk="http://www.opendatakit.org/xforms" xmlns:orx="http://openrosa.org/xforms" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <h:head>
    <h:title>fieldlist-updates</h:title>
    <model>
      <itext>
        <translation default="true()" lang="default">
          <text id="static_instance-level1-0">
            <value>A</value>
          </text>
          <text id="static_instance-level1-1">
            <value>B</value>
          </text>
          <text id="static_instance-level1-2">
            <value>C</value>
          </text>
          <text id="static_instance-level2-0">
            <value>A1</value>
          </text>
          <text id="static_instance-level2-1">
            <value>A2</value>
          </text>
          <text id="static_instance-level2-2">
            <value>A3</value>
          </text>
          <text id="static_instance-level2-3">
            <value>B1</value>
          </text>
          <text id="static_instance-level2-4">
            <value>B2</value>
          </text>
          <text id="static_instance-level2-5">
            <value>B3</value>
          </text>
          <text id="static_instance-level2-6">
            <value>C1</value>
          </text>
          <text id="static_instance-level2-7">
            <value>C2</value>
          </text>
          <text id="static_instance-level2-8">
            <value>C3</value>
          </text>
          <text id="static_instance-level2-9">
            <value>C4</value>
          </text>
          <text id="static_instance-level3-0">
            <value>A1A</value>
          </text>
          <text id="static_instance-level3-1">
            <value>A1B</value>
          </text>
        </translation>
      </itext>
      <instance>
        <fieldlist-updates id="fieldlist-updates">
          <single_relevance_at_end>
            <source1/>
            <target1/>
          </single_relevance_at_end>
          <single_relevance_at_beginning>
            <target2/>
            <source2/>
          </single_relevance_at_beginning>
          <single_relevance_in_middle>
            <source3/>
            <target3/>
            <filler3/>
          </single_relevance_in_middle>
          <label_change>
            <target4/>
            <source4/>
          </label_change>
          <hint_change>
            <source5/>
            <target5/>
          </hint_change>
          <value_change>
            <source6/>
            <target6/>
          </value_change>
          <cascading_select>
            <source7/>
            <target7/>
            <target7-1/>
          </cascading_select>
          <meta>
            <instanceID/>
          </meta>
        </fieldlist-updates>
      </instance>
      <instance id="level1">
        <root>
          <item>
            <itextId>static_instance-level1-0</itextId>
            <name>a</name>
          </item>
          <item>
            <itextId>static_instance-level1-1</itextId>
            <name>b</name>
          </item>
          <item>
            <itextId>static_instance-level1-2</itextId>
            <name>c</name>
          </item>
        </root>
      </instance>
      <instance id="level2">
        <root>
          <item>
            <itextId>static_instance-level2-0</itextId>
            <name>a1</name>
            <level1>a</level1>
          </item>
          <item>
            <itextId>static_instance-level2-1</itextId>
            <name>a2</name>
            <level1>a</level1>
          </item>
          <item>
            <itextId>static_instance-level2-2</itextId>
            <name>a3</name>
            <level1>a</level1>
          </item>
          <item>
            <itextId>static_instance-level2-3</itextId>
            <name>b1</name>
            <level1>b</level1>
          </item>
          <item>
            <itextId>static_instance-level2-4</itextId>
            <name>b2</name>
            <level1>b</level1>
          </item>
          <item>
            <itextId>static_instance-level2-5</itextId>
            <name>b3</name>
            <level1>b</level1>
          </item>
          <item>
            <itextId>static_instance-level2-6</itextId>
            <name>c1</name>
            <level1>c</level1>
          </item>
          <item>
            <itextId>static_instance-level2-7</itextId>
            <name>c2</name>
            <level1>c</level1>
          </item>
          <item>
            <itextId>static_instance-level2-8</itextId>
            <name>c3</name>
            <level1>c</level1>
          </item>
          <item>
            <itextId>static_instance-level2-9</itextId>
            <name>c4</name>
            <level1>c</level1>
          </item>
        </root>
      </instance>
      <instance id="level3">
        <root>
          <item>
            <itextId>static_instance-level3-0</itextId>
            <level2>a1</level2>
            <name>a1a</name>
          </item>
          <item>
            <itextId>static_instance-level3-1</itextId>
            <level2>a1</level2>
            <name>a1b</name>
          </item>
        </root>
      </instance>
      <bind nodeset="/fieldlist-updates/single_relevance_at_end/source1" type="string"/>
      <bind nodeset="/fieldlist-updates/single_relevance_at_end/target1" relevant="string-length( /fieldlist-updates/single_relevance_at_end/source1 ) &gt; 0" type="string"/>
      <bind nodeset="/fieldlist-updates/single_relevance_at_beginning/target2" relevant="string-length( /fieldlist-updates/single_relevance_at_beginning/source2 ) &gt; 0" type="string"/>
      <bind nodeset="/fieldlist-updates/single_relevance_at_beginning/source2" type="string"/>
      <bind nodeset="/fieldlist-updates/single_relevance_in_middle/source3" type="string"/>
      <bind nodeset="/fieldlist-updates/single_relevance_in_middle/target3" relevant="string-length( /fieldlist-updates/single_relevance_in_middle/source3 ) &gt; 0" type="string"/>
      <bind nodeset="/fieldlist-updates/single_relevance_in_middle/filler3" type="string"/>
      <bind nodeset="/fieldlist-updates/label_change/target4" type="string"/>
      <bind nodeset="/fieldlist-updates/label_change/source4" type="string"/>
      <bind nodeset="/fieldlist-updates/hint_change/source5" type="string"/>
      <bind nodeset="/fieldlist-updates/hint_change/target5" type="string"/>
      <bind nodeset="/fieldlist-updates/value_change/source6" type="string"/>
      <bind calculate="string-length( /fieldlist-updates/value_change/source6 )" nodeset="/fieldlist-updates/value_change/target6" type="int"/>
      <bind nodeset="/fieldlist-updates/cascading_select/source7" type="select1"/>
      <bind nodeset="/fieldlist-updates/cascading_select/target7" type="select1"/>
      <bind nodeset="/fieldlist-updates/cascading_select/target7-1" type="select1"/>
      <bind calculate="concat('uuid:', uuid())" nodeset="/fieldlist-updates/meta/instanceID" readonly="true()" type="string"/>
    </model>
  </h:head>
  <h:body>
    <group appearance="field-list" ref="/fieldlist-updates/single_relevance_at_end">
      <label>Single relevance at end</label>
      <input ref="/fieldlist-updates/single_relevance_at_end/source1">
        <label>Source1</label>
      </input>
      <input ref="/fieldlist-updates/single_relevance_at_end/target1">
        <label>Target1</label>
      </input>
    </group>
    <group appearance="field-list" ref="/fieldlist-updates/single_relevance_at_beginning">
      <label>Single relevance at beginning</label>
      <input ref="/fieldlist-updates/single_relevance_at_beginning/target2">
        <label>Target2</label>
      </input>
      <input ref="/fieldlist-updates/single_relevance_at_beginning/source2">
        <label>Source2</label>
      </input>
    </group>
    <group appearance="field-list" ref="/fieldlist-updates/single_relevance_in_middle">
      <label>Single relevance in middle</label>
      <input ref="/fieldlist-updates/single_relevance_in_middle/source3">
        <label>Source3</label>
      </input>
      <input ref="/fieldlist-updates/single_relevance_in_middle/target3">
        <label>Target3</label>
      </input>
      <input ref="/fieldlist-updates/single_relevance_in_middle/filler3">
        <label>Filler3</label>
      </input>
    </group>
    <group appearance="field-list" ref="/fieldlist-updates/label_change">
      <label>Label change</label>
      <input ref="/fieldlist-updates/label_change/target4">
        <label> Hello, <output value=" /fieldlist-updates/label_change/source4 "/>, how are you today? </label>
      </input>
      <input ref="/fieldlist-updates/label_change/source4">
        <label>What is your name?</label>
      </input>
    </group>
    <group appearance="field-list" ref="/fieldlist-updates/hint_change">
      <label>Hint change</label>
      <input ref="/fieldlist-updates/hint_change/source5">
        <label>What is your name?</label>
      </input>
      <input ref="/fieldlist-updates/hint_change/target5">
        <label>What is 2 + 2?</label>
        <hint> Please don't use your calculator, <output value=" /fieldlist-updates/hint_change/source5 "/>! </hint>
      </input>
    </group>
    <group appearance="field-list" ref="/fieldlist-updates/value_change">
      <label>Value change</label>
      <input ref="/fieldlist-updates/value_change/source6">
        <label>What is your name?</label>
      </input>
      <input ref="/fieldlist-updates/value_change/target6">
        <label>Name length</label>
      </input>
    </group>
    <group appearance="field-list" ref="/fieldlist-updates/cascading_select">
      <label>Cascading select</label>
      <select1 ref="/fieldlist-updates/cascading_select/source7">
        <label>Level1</label>
        <item>
          <label>A</label>
          <value>a</value>
        </item>
        <item>
          <label>B</label>
          <value>b</value>
        </item>
        <item>
          <label>C</label>
          <value>c</value>
        </item>
      </select1>
      <select1 ref="/fieldlist-updates/cascading_select/target7">
        <label>Level2</label>
        <itemset nodeset="instance('level2')/root/item[level1 =  /fieldlist-updates/cascading_select/source7 ]">
          <value ref="name"/>
          <label ref="jr:itext(itextId)"/>
        </itemset>
      </select1>
      <select1 ref="/fieldlist-updates/cascading_select/target7-1">
        <label>Level3</label>
        <itemset nodeset="instance('level3')/root/item[level2 =  /fieldlist-updates/cascading_select/target7 ]">
          <value ref="name"/>
          <label ref="jr:itext(itextId)"/>
        </itemset>
      </select1>
    </group>
  </h:body>
</h:html>
